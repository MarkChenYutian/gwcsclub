I"ÕD<h2 id="icy-perimeter">Icy Perimeter</h2>

<h3 id="é¢˜ç›®">é¢˜ç›®</h3>

<p>ç»™å‡ºä¸€ä¸ªN*N(Nå°äºç­‰äº1000)çŸ©é˜µç”±ä¸¤ç§å­—ç¬¦(å®šä¹‰ä¸º0å’Œ1)ç»„æˆ,å…¶ä¸­1å·å­—ç¬¦ä¼šè¢«åˆ‡åˆ†æˆå‡ ä¸ªéƒ¨åˆ†,æ±‚å‡ºé¢ç§¯æœ€å¤§,å‘¨é•¿æœ€å°çš„éƒ¨åˆ†</p>

<h3 id="åˆ†æ">åˆ†æ</h3>

<p>è¿™é¢˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨fluidfillçš„æ€è·¯æ¥æ‰¾å‡ºæ‰€æœ‰çš„1å·å­—ç¬¦çš„åæ ‡,æ¯ä¸ªéƒ¨åˆ†å­˜è¿›ä¸€ä¸ªlist,å…¶ä¸­listçš„é•¿åº¦å³ä¸ºé¢ç§¯,ç„¶åé€šè¿‡éå†æ•´ä¸ªlistæŸ¥çœ‹æ¯ä¸ªåæ ‡å‘¨å›´æ˜¯å¦ä¸º0æˆ–è€…è¶Šç•Œæ¥è®¡ç®—é¢ç§¯</p>

<h3 id="å¤æ‚åº¦">å¤æ‚åº¦</h3>

<p>fluidfillçš„ç®—æ³•éœ€è¦éå†æ‰€æœ‰çš„ç‚¹å¤æ‚åº¦ä¸ºO(N*N),è®¡ç®—é¢ç§¯å³è·å–listé•¿åº¦å¤æ‚åº¦O(1),ç„¶åå–å‡ºäº†ä¸€ä¸ªlist,éå†list,æŸ¥çœ‹ä¸€ä¸ªç‚¹å‘¨å›´æ¥è®¡ç®—å‘¨é•¿å¤æ‚åº¦O(4N),æ‰€ä»¥æ€»å…±çš„å¤æ‚åº¦O(N^2^),Nçš„å¤§å°ä¸º1000,æ‰€ä»¥æœ€å¤§è¿ç®—ä¸º10^6^å·¦å³</p>

<h3 id="ä»£ç ">ä»£ç </h3>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stack&gt;
#include &lt;vector&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">N</span><span class="p">,</span><span class="n">ice</span><span class="p">[</span><span class="mi">2000</span><span class="p">][</span><span class="mi">2000</span><span class="p">],</span><span class="n">isVisit</span><span class="p">[</span><span class="mi">2000</span><span class="p">][</span><span class="mi">2000</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">change</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">},{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">},{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">},{</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span> <span class="p">};</span>
<span class="kt">int</span> <span class="n">maxA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="n">MaxP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">struct</span> <span class="nc">point</span><span class="p">{</span>
	<span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">getlength</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">point</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">){</span>
	<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
			<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="o">+</span><span class="n">change</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
			<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="o">+</span><span class="n">change</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
			<span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="o">&amp;&amp;</span> <span class="n">ice</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
				<span class="n">count</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">N</span><span class="p">){</span>
				<span class="n">count</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>
				
			<span class="p">}</span>
			<span class="k">if</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="n">N</span><span class="p">){</span>
				<span class="n">count</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>
				
			<span class="p">}</span>
			
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">count</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">floodfill</span><span class="p">(){</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
			<span class="k">if</span><span class="p">(</span><span class="n">isVisit</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ice</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
				<span class="n">vector</span><span class="o">&lt;</span><span class="n">point</span><span class="o">&gt;</span> <span class="n">biggest</span><span class="p">;</span>
				<span class="n">point</span> <span class="n">curr</span><span class="p">;</span>
				<span class="n">curr</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="n">curr</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
				<span class="n">stack</span><span class="o">&lt;</span><span class="n">point</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">;</span>
				<span class="n">biggest</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">curr</span><span class="p">);</span>
				<span class="n">s</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">curr</span><span class="p">);</span>
				<span class="n">isVisit</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
				<span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
					<span class="n">point</span> <span class="n">now</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
					<span class="n">s</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
					<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">a</span><span class="o">++</span><span class="p">){</span>
						<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">now</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">change</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
						<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">now</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">change</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
						<span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">N</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="n">N</span> <span class="o">||</span> <span class="n">isVisit</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">ice</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
							<span class="k">continue</span><span class="p">;</span>
						<span class="p">}</span>
						<span class="n">point</span> <span class="n">temp</span><span class="p">;</span>
						<span class="n">temp</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
						<span class="n">temp</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
						<span class="n">s</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
						<span class="n">biggest</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
						<span class="n">isVisit</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
						
					<span class="p">}</span>
				<span class="p">}</span>
				<span class="kt">int</span> <span class="n">area</span> <span class="o">=</span> <span class="n">biggest</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
				<span class="kt">int</span> <span class="n">p</span> <span class="o">=</span> <span class="n">getlength</span><span class="p">(</span><span class="n">biggest</span><span class="p">);</span>
				<span class="k">if</span><span class="p">(</span><span class="n">area</span> <span class="o">&gt;</span> <span class="n">maxA</span><span class="p">){</span>
					<span class="n">maxA</span> <span class="o">=</span> <span class="n">area</span><span class="p">;</span>
					<span class="n">MaxP</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
				<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">area</span> <span class="o">==</span> <span class="n">maxA</span><span class="p">){</span>
					<span class="k">if</span><span class="p">(</span><span class="n">p</span> <span class="o">&lt;</span> <span class="n">MaxP</span><span class="p">){</span>
						<span class="n">MaxP</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="kt">int</span> <span class="n">line</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">temp</span><span class="p">){</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'#'</span><span class="p">){</span>
			<span class="n">ice</span><span class="p">[</span><span class="n">line</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
	<span class="kt">FILE</span><span class="o">*</span> <span class="n">in</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">"perimeter.in"</span><span class="p">,</span><span class="s">"r"</span><span class="p">);</span>
	<span class="kt">FILE</span><span class="o">*</span> <span class="n">out</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">"perimeter.out"</span><span class="p">,</span><span class="s">"w"</span><span class="p">);</span>
	<span class="n">fscanf</span><span class="p">(</span><span class="n">in</span><span class="p">,</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">N</span><span class="p">);</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="kt">char</span> <span class="n">temp</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
		<span class="n">fscanf</span><span class="p">(</span><span class="n">in</span><span class="p">,</span><span class="s">"%s"</span><span class="p">,</span><span class="n">temp</span><span class="p">);</span>
		<span class="n">process</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">temp</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="n">floodfill</span><span class="p">();</span>
	<span class="n">fprintf</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"%d %d"</span><span class="p">,</span><span class="n">maxA</span><span class="p">,</span><span class="n">MaxP</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
:ET