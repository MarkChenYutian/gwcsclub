I"ÃK<h3 id="rectangular-pasture">Rectangular Pasture</h3>

<blockquote>
  <p>é¢˜ç›®å¤§æ„ï¼šæœ‰nå¤´ç‰›å¾…åœ¨ä¸€ä¸ªäºŒç»´å¹³é¢ï¼Œå·²çŸ¥æ¯å¤´ç‰›çš„xï¼Œyåæ ‡ï¼Œä¸”xã€yåæ ‡åˆ†åˆ«çš„å”¯ä¸€çš„ã€‚ç°å®šä¹‰ï¼šä¸€ä¸ªçŸ©å½¢ï¼ˆå››æ¡è¾¹åˆ†åˆ«ä¸xè½´ã€yè½´å¹³è¡Œï¼‰æ‰€åŒ…å«çš„ç‰›ç§°ä¸ºä¸€ä¸ªå­é›†ã€‚è¯·æ±‚å‡ºæœ‰å¤šå°‘ä¸ªä¸åŒçš„å­é›†ï¼ˆåªåŒ…å«ä¸€å¤´ç‰›ä¹Ÿç®—å­é›†ï¼Œç©ºé›†ä¹Ÿç®—ä¸€ä¸ªå­é›†ï¼‰ã€‚</p>
</blockquote>

<h4 id="æ€è·¯">æ€è·¯ï¼š</h4>

<p>ä¸€ä¸ªçŸ©å½¢çš„å››æ¡è¾¹ä¸­ä»»æ„ä¸€æ¡è¾¹çš„å¹³ç§»ï¼Œå¦‚æœå¤šåŒ…å«äº†ä¸€ä¸ªç‚¹/å°‘åŒ…å«äº†ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯ä¸€ä¸ªæ–°çš„å­é›†ã€‚
é€‰æ‹©ä¸¤å¤´ç‰›ï¼Œä»¥è¿™ä¸¤ä¸ªç‚¹ä¸ºå¯¹è§’çº¿ï¼Œå¾—åˆ°ä¸€ä¸ªçŸ©å½¢ï¼Œå›ºå®šå…¶å·¦ã€å³ä¸¤æ¡è¾¹ã€‚ä¸Šé¢çš„è¾¹å¯ä»¥å…ˆä¸Šå¹³ç§»ã€ä¸‹é¢çš„è¾¹å¯ä»¥å‘ä¸‹å¹³ç§»ï¼ŒåŒ…å«æ›´å¤šçš„ç‚¹ä»¥äº§ç”Ÿæ–°çš„å­é›†ã€‚
è™½ç„¶ä¸Šé¢çš„è¾¹å‘ä¸‹ã€ä¸‹é¢çš„è¾¹å‘ä¸Šå¹³ç§»ï¼Œä¹Ÿèƒ½å°‘åŒ…å«ç‚¹è€Œå¾—åˆ°æ–°çš„å­é›†ï¼Œä½†æ˜¯å¾€å†…å¹³ç§»åçš„å·¦å³ä¸¤æ¡è¾¹ä¹Ÿä¼šäº§ç”Ÿä¸€æ ·çš„å­é›†ï¼Œå³ä¼šäº§ç”Ÿé‡å¤ï¼Œå› æ­¤ä¸æŠŠä¸Šè¾¹å¾€ä¸‹å¹³ç§»/ä¸‹è¾¹å¾€ä¸Šå¹³ç§»ã€‚
å‡è®¾ä¸Šé¢çš„è¾¹ä¹‹ä¸Šæœ‰n1ä¸ªç‚¹ï¼Œä¸‹é¢çš„è¾¹ä¹‹ä¸‹æœ‰n2ä¸ªç‚¹ã€‚é€šè¿‡å¹³ç§»è¿™ä¸¤æ¡è¾¹ï¼Œä¸Šé¢çš„è¾¹å¯ä»¥å¤šåŒ…å«0ï¼ˆå¯ä»¥ä¸åŒ…å«ï¼‰ï¼Œ1ï¼Œ2ï¼Œâ€¦â€¦ï¼Œn1ä¸ªç‚¹ï¼Œn1+1ä¸ªé€‰é¡¹ï¼Œä¸‹é¢åŒç†æœ‰n2+1ä¸ªé€‰é¡¹ï¼Œç›¸ä¹˜å¾—(n1+1)*(n2+1)ï¼Œå°±æ˜¯è¿™ä¸ªçŸ©å½¢çš„ä¸Šä¸‹ä¸¤æ¡è¾¹å¹³ç§»å¯ä»¥å¾—åˆ°çš„å­é›†çš„æ•°é‡
<img src="https://tva1.sinaimg.cn/mw690/0085ShT8gy1glwweqwyqdj307609paad.jpg" alt="1" />ä¸Šé¢å¯ä»¥é€‰æ‹©åŒ…å«0, 1, 2, 3ä¸ªç‚¹ï¼Œä¸‹é¢å¯ä»¥é€‰æ‹©0, 1, 2ä¸ªç‚¹ï¼Œæœ‰12ä¸ªé€‰æ‹©
ç”¨åµŒå¥—å¾ªç¯æ¥é€‰æ‹©ä¸¤ä¸ªç‚¹ï¼Œç”¨è¿™ä¸¤ä¸ªç‚¹æ„é€ ä¸Šè¿°çš„çŸ©å½¢ï¼Œæ¯ä¸ªçŸ©å½¢è®¡ç®—(n1+1)*(n2+1)ï¼Œå…¶æ€»å’Œ+n+1ï¼ˆåªåŒ…å«ä¸€å¤´ç‰›çš„å­é›†å’Œç©ºé›†ï¼‰å°±æ˜¯ç­”æ¡ˆã€‚</p>

<p>åˆ›å»ºä¸€ä¸ªäºŒç»´å‰ç¼€å’Œæ•°ç»„ï¼Œå°±å¯ä»¥O(1)åœ°å¾—åˆ°n1ã€n2ã€‚
ä¸ºäº†èŠ‚çœå‰ç¼€å’Œæ•°ç»„çš„ç©ºé—´ï¼Œxã€yåæ ‡åˆ†åˆ«ç”¨ä¸€ä¸ªæ•°ç»„å­˜å‚¨ã€æ’åºè¿™ä¸ªæ•°ç»„ï¼Œç„¶åä½¿ç”¨ä¸¤ä¸ªdictionaryï¼Œkeyæ˜¯x(y)å€¼ï¼Œvalueæ˜¯æ’åºåçš„x(y)å€¼æ•°ç»„çš„indexï¼Œå³æœ‰å‡ ä¸ªx(y)å€¼æ¯”å…¶å°ï¼Œç„¶åç”¨è¿™ä¸¤ä¸ªdictionaryå°†æ¯ä¸ªç‚¹çš„xã€yåæ ‡æ›¿æ¢æˆâ€œæœ‰å‡ ä¸ªx(y)å€¼æ¯”å…¶å°â€ã€‚è¿™æ ·ï¼ŒäºŒç»´å‰ç¼€å’Œçš„å¤§å°å°±åªéœ€è¦n*nã€‚</p>

<h4 id="å¤æ‚åº¦">å¤æ‚åº¦ï¼š</h4>

<p>å°†xã€yæ›¿æ¢æˆâ€œæœ‰å‡ ä¸ªx(y)å€¼æ¯”å…¶å°â€ä¸­éœ€è¦æ’åºï¼ŒO(n*log(n))ã€‚
åˆ›å»ºäºŒç»´å‰ç¼€å’Œæ•°ç»„ï¼Œéœ€è¦éå†æ¯ä¸ªä½ç½®ï¼ŒO(n\^2)ã€‚
åµŒå¥—å¾ªç¯ï¼ŒO(n\^2)ï¼Œæ¯æ¬¡çš„ä¸¤ä¸ªç‚¹ç”¨O(1)è®¡ç®—å­é›†æ•°é‡ã€‚
æ€»çš„æ˜¯O(n\^2)ã€‚</p>

<h4 id="å®ç°">å®ç°ï¼š</h4>

<blockquote>
  <p>Note that due to the low speed of python program, although the python programâ€™s code is nearly the same meaning (the same effect) as java program, java program can pass through time limit but python program cannot.</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span> <span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">rec</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span><span class="n">args</span><span class="o">)</span><span class="kd">throws</span> <span class="nc">IOException</span><span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span><span class="o">=</span><span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="kt">long</span><span class="o">[][]</span><span class="n">cows</span><span class="o">=</span><span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
        <span class="kt">long</span><span class="o">[]</span><span class="n">xs</span><span class="o">=</span><span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="kt">long</span><span class="o">[]</span><span class="n">ys</span><span class="o">=</span><span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span><span class="nc">Integer</span><span class="o">&gt;</span><span class="n">mapx</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span><span class="nc">Integer</span><span class="o">&gt;</span><span class="n">mapy</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
            <span class="nc">String</span><span class="o">[]</span><span class="n">st</span><span class="o">=</span><span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
            <span class="kt">long</span><span class="o">[]</span><span class="n">temp</span><span class="o">={</span><span class="nc">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">st</span><span class="o">[</span><span class="mi">0</span><span class="o">]),</span><span class="nc">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">st</span><span class="o">[</span><span class="mi">1</span><span class="o">])};</span>
            <span class="n">cows</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="n">temp</span><span class="o">;</span>
            <span class="n">xs</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="n">temp</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="n">ys</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="n">temp</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">xs</span><span class="o">);</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">ys</span><span class="o">);</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span> <span class="n">mapx</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">xs</span><span class="o">[</span><span class="n">i</span><span class="o">],</span><span class="n">i</span><span class="o">);</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span> <span class="n">mapy</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">ys</span><span class="o">[</span><span class="n">i</span><span class="o">],</span><span class="n">i</span><span class="o">);</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">long</span><span class="o">[]</span><span class="nl">cow:</span><span class="n">cows</span><span class="o">){</span>
            <span class="n">cow</span><span class="o">[</span><span class="mi">0</span><span class="o">]=</span><span class="n">mapx</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">cow</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
            <span class="n">cow</span><span class="o">[</span><span class="mi">1</span><span class="o">]=</span><span class="n">mapy</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">cow</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
        <span class="o">}</span>
        <span class="kt">long</span><span class="o">[][]</span><span class="n">map</span><span class="o">=</span><span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">n</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">long</span><span class="o">[]</span><span class="nl">cow:</span><span class="n">cows</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">x</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">cow</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">y</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">cow</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="n">map</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">]=</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span><span class="n">x</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">x</span><span class="o">++)</span> <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">y</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">y</span><span class="o">++)</span> <span class="n">map</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">]+=</span><span class="n">map</span><span class="o">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">y</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">x</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">x</span><span class="o">++)</span> <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span><span class="n">y</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">y</span><span class="o">++)</span> <span class="n">map</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">]+=</span><span class="n">map</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
        <span class="kt">long</span> <span class="n">count</span><span class="o">=</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">long</span><span class="o">[]</span><span class="nl">line:</span><span class="n">map</span><span class="o">){</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">line</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">a</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">a</span><span class="o">++){</span>
            <span class="kt">long</span><span class="o">[]</span><span class="n">cow1</span><span class="o">=</span><span class="n">cows</span><span class="o">[</span><span class="n">a</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">x1</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">cow1</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">y1</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">cow1</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">b</span><span class="o">=</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span><span class="n">b</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span><span class="n">b</span><span class="o">++){</span>
                <span class="kt">long</span><span class="o">[]</span><span class="n">cow2</span><span class="o">=</span><span class="n">cows</span><span class="o">[</span><span class="n">b</span><span class="o">];</span>
                <span class="kt">int</span> <span class="n">x2</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">cow2</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
                <span class="kt">int</span> <span class="n">y2</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">cow2</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
                <span class="kt">int</span> <span class="n">x_g</span><span class="o">=</span><span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">x2</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">x_s</span><span class="o">=</span><span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">x2</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">y_g</span><span class="o">=</span><span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">y1</span><span class="o">,</span><span class="n">y2</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">y_s</span><span class="o">=</span><span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">y1</span><span class="o">,</span><span class="n">y2</span><span class="o">);</span>
                <span class="kt">long</span> <span class="n">above</span><span class="o">=</span><span class="n">map</span><span class="o">[</span><span class="n">x_g</span><span class="o">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">]-</span><span class="n">map</span><span class="o">[</span><span class="n">x_s</span><span class="o">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">]-</span><span class="n">map</span><span class="o">[</span><span class="n">x_g</span><span class="o">][</span><span class="n">y_g</span><span class="o">]+</span><span class="n">map</span><span class="o">[</span><span class="n">x_s</span><span class="o">][</span><span class="n">y_g</span><span class="o">];</span>
                <span class="kt">long</span> <span class="n">below</span><span class="o">;</span>
                <span class="k">if</span><span class="o">(</span><span class="n">y_s</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">)</span> <span class="n">below</span><span class="o">=</span><span class="n">map</span><span class="o">[</span><span class="n">x_g</span><span class="o">][</span><span class="n">y_s</span><span class="o">-</span><span class="mi">1</span><span class="o">]-</span><span class="n">map</span><span class="o">[</span><span class="n">x_s</span><span class="o">][</span><span class="n">y_s</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
                <span class="k">else</span> <span class="n">below</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
                <span class="n">count</span><span class="o">+=(</span><span class="n">above</span><span class="o">+</span><span class="mi">1</span><span class="o">)*(</span><span class="n">below</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
:ET